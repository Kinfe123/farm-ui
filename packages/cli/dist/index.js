import"dotenv/config";import{Command as ie}from"commander";import"dotenv/config";import{existsSync as p,promises as x}from"fs";import r from"path";import Q from"gradient-string";import{Command as Z}from"commander";import I from"ora";import{execa as ee}from"execa";import f from"prompts";import H from"path";import V from"fs-extra";function l(){let t=H.join("package.json");return V.readJSONSync(t)}var X=l(),G=`
\u2591\u2592\u2593\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2588\u2588\u2588\u2588\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591 
\u2591\u2592\u2593\u2588\u2593\u2592\u2591     \u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591 
\u2591\u2592\u2593\u2588\u2593\u2592\u2591     \u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591 
\u2591\u2592\u2593\u2588\u2588\u2588\u2588\u2588\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591 
\u2591\u2592\u2593\u2588\u2593\u2592\u2591     \u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591 
\u2591\u2592\u2593\u2588\u2593\u2592\u2591     \u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591  
\u2591\u2592\u2593\u2588\u2593\u2592\u2591     \u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2588\u2588\u2588\u2588\u2588\u2593\u2592\u2591\u2591\u2592\u2593\u2588\u2593\u2592\u2591  v${X.version}
                                                                               
`;import v from"chalk";var o={error(...t){console.log(v.red(...t))},warn(...t){console.log(v.yellow(...t))},info(...t){console.log(v.cyan(...t))},success(...t){console.log(v.green(...t))},break(){console.log("")}};import{z as R}from"zod";import{detect as q}from"@antfu/ni";async function O(t){let s=await q({programmatic:!0,cwd:t});return s==="yarn@berry"?"yarn":s==="pnpm@6"?"pnpm":s==="bun"?"bun":s??"npm"}var F=[{name:"React",value:"react"},{name:"Vue",value:"vue"},{name:"Svelte",value:"svelte"},{name:"Html",value:"html"}];process.on("SIGINT",()=>process.exit(0));process.on("SIGTERM",()=>process.exit(0));var oe="https://farmui-api.vercel.app/api/components",te=R.object({id:R.string(),cwd:R.string()}),ne=["animation","keyframes"];console.log(Q("pink","blue")(G));var U=new Z().name("add").description("add a new component or UI from farmui").argument("<string>","id of the component from https://farmui.com/components").option("-c, --cwd <cwd>","the working directory. defaults to the current directory.",process.cwd()).action(async(t,s)=>{let u=te.parse({id:t,...s}),h=r.resolve(u.cwd),g=F[0].value;p(h)||(o.error(`There is no ${h} exists your paths.`),process.exit(0));let _="components",W=process.cwd()===u.cwd;try{if(!W)o.info(`The component is being dumped inside of ${h} `);else{let{dir:e}=await f({type:"text",name:"dir",message:"A directory to dump the components? (Leave it blank which default to /components dir) ",hint:"components"});e&&(_=e)}let{srcDir:b}=await f({type:"select",name:"srcDir",message:"Do you have use /src directory ?",hint:"Space to select and Enter to submit.",instructions:!1,choices:["Yes","No"].map(e=>({title:e,value:e,selected:e==="Yes"}))});b==="Yes"&&(_="/src"+_);let{fm:P}=await f({type:"select",name:"fm",message:"Which framework do you want to use with?",hint:"Space to select and Enter to submit.",instructions:!1,choices:F.map(e=>({title:e.name,value:e.value,selected:e.value==="react"}))});P&&(g=P),g!=="react"&&(o.error(`We are not currently supporting ${P} on https://farmui.com.`),o.info("Be a part of the community by adding an integration to your favorite framework, go for https://github.com/Kinfe123/farm-ui"),process.exit(0));let L=r.join(h,_),d=r.join(L,"/farmui"),$=I(`Looking for the components with id ${u.id}`);$.start();let C=null,D=[];try{C=await fetch(oe),D=await C.json()}catch{o.error(`
Cant import the components. Please check your network connection`),o.info("If you think this is an bug, Please make an issue - https://github.com/Kinfe123/farm-ui/issues/new"),process.exit(0)}$.succeed(`Found the component. Preview here - https://farmui.com/example/${u.id}`),$.stop();let c=D.find(e=>e.id===u.id);if(c||(o.error("No such component exists with in this ID, Please hop on https://farmui.com/components to double check the component ID"),o.info("If you think this is an bug, Please make an issue - https://github.com/Kinfe123/farm-ui/issues/new"),process.exit(0)),p(d)){let{proceed:e}=await f({type:"confirm",name:"proceed",message:"Ready to install components and dependencies. Proceed?",initial:!0});e||(o.info("Make sure you have the right path to dump the components"),process.exit(0))}else await x.mkdir(d,{recursive:!0});let m=[],T=c.files[0].root.name,E=!1;for(;!E;){let{componentName:e}=await f({type:"text",name:"componentName",message:`What do you want the component to be called? (leave it blank which defaults to ${T})`,hint:"component name"});if(!e)break;let n=r.join(d,`${e}.tsx`);p(n)?o.warn("The component with that name already existed. Please with another name"):(T=e,E=!0)}let j=c.tailwind;if(j){o.info("The components need tailwind.config.(ts/js) change");let e=r.join(process.cwd(),"tailwind.config.js"),n=r.join(process.cwd(),"tailwind.config.ts"),i="ts",a=!0;if(!p(n)&&!p(e)&&(a=!1),!a)o.warn("The tailwind.config.(js/ts) can not be found with in the given directory , Please make sure to intialize your project with tailwindcss or shadcn , may be any UI component library that built on top of tailwind"),o.warn("Please use this instructions to setup your tailwindcss - https://tailwindcss.com/docs/installation"),o.info("Skipping... and importing the components");else{p(e)&&(i="js");let y=`tailwind.config.${i}`,z=r.join(process.cwd(),y),de=await x.readFile(z,"utf8");ne.map(k=>{if(k in j){o.info(`For ${k} - copy the following and paste it to your ${y}`);let B=j[k].content;console.log({[k]:B})}})}}c.files[0].root.contents[g]||(o.info("We have not added the component yet. But you can be the on to add this. hop on https://github.com/Kinfe123/farm-ui"),process.exit(0));let J=c.files[0].root.contents[g].content,K=r.join(d,T),M=[];c[1]&&(M=c.files[1].child),m.push({comp_content:J,comp_path:K}),M.map(e=>{let n=e.name,i=e.contents[g].content,a=r.join(d,n);m.push({comp_content:i,comp_path:a})});let S=I("Dumping your components..."),N=I("Overriting"),w=c.dependencies;m?m.map(async({comp_content:e,comp_path:n})=>{let i=`${n}.tsx`;if(p(i)){let{overwrite:a}=await f({type:"confirm",name:"overwrite",message:"Override already existed component? Proceed?",initial:!0});a?(N=I(`Overwriting the component at ${i}....`),N.start(),await x.writeFile(`${n}.tsx`,e)):o.info(`Skipping: The component ${i} already existed`)}else S.start(),await x.writeFile(`${n}.tsx`,e)}):o.warn("No component to add");let Y=await O(h);w?.length&&await ee(`${Y}`,["install",...w],{cwd:process.cwd()}),S.stop(),N.stop();let A=l().dependencies;if(w.length&&(o.info(`Dependencies - ${w.length} added`),w.map(e=>{let n=(A&&String(A[e]))??"";o.success(` + ${e} @ ${n}`)})),m){let e=d.split("/"),n=e[e.length-2]+"/"+e[e.length-1];o.info(`Components - ${m.length} added inside of ${n}`),m.map(i=>{let a=i.comp_path.split("/"),y=a[a.length-1];o.success(` + ${y}`)})}S.succeed("Successfully installed")}catch(b){o.error("Error has occured!"),console.log("Error: ",b)}});process.on("SIGINT",()=>process.exit(0));process.on("SIGTERM",()=>process.exit(0));async function se(){let t=await l(),s=new ie().name("farmui").description("Add natively farmed farmUI blocks ").version(t.version||"0.1.0","-v, --version","display the version number");s.addCommand(U),s.parse()}se();
//# sourceMappingURL=index.js.map